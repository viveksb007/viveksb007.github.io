
  







<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>viveksb007 | How Snapchat detects when screenshot is taken (Hypothesis) </title>
  <meta name="theme-color" content="#222222" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="icon" type="image/png" href="/assets/logo-black.PNG">
  <script src="/assets/js/jquery.min.js"></script>
  <script src="/assets/js/bootstrap.min.js"></script>
  <script src="/assets/js/header.js"></script>
  <script src="/assets/js/toc.js"></script>
  <script src="/assets/js/processing.min.js"></script>
  <link href="/assets/css/bootstrap.min.css" rel="stylesheet">
  <link href="/assets/css/theme.css" rel="stylesheet">
  <link href="/assets/css/syntax.css" rel="stylesheet">
  <link href="/assets/css/font-awesome/css/font-awesome.min.css" rel="stylesheet">
</head>

<body>

  

  


 <script type="text/javascript">
  WebFontConfig = {
    google: {
      families: ['Ubuntu::latin']
    }
  };
  (function() {
    var wf = document.createElement('script');
    wf.src = ('https:' == document.location.protocol ? 'https' : 'http') +
      '://ajax.googleapis.com/ajax/libs/webfont/1/webfont.js';
    wf.type = 'text/javascript';
    wf.async = 'true';
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(wf, s);
  })();
</script>

  <nav class="navbar navbar-inverse navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="/">viveksb007</a>
      </div>
      <div class="collapse navbar-collapse">
        <ul class="nav navbar-nav">
          <li><a href="/">/home</a></li>
          <li><a href="/projects">/projects</a></li>
          <li><a href="/archive.html">/archive</a></li>
          <li><a href="/tags.html">/tags</a></li>
          <li><a href="/about.html">/about</a></li>
        </ul>
      </div>
    </div>
  </nav>

    <div class="wrapper">
      <div class="content">
        <div class="container container-center">
          <div class="row">
            <div class="col-md-8">
              <div class="article">
                <div class="well">
                  <h1><a href="/2017/11/how-snapchat-detects-screenshot">How Snapchat detects when screenshot is taken (Hypothesis)</a></h1>
                  <div class="post-meta">
                    <div class="post-time">
                      <i class="fa fa-calendar"></i>
                      <time>10 Nov 2017</time>
                    </div>
                    <ul>
                      
                        <li><a href="/tag/snapchat">snapchat</a></li>
                      
                        <li><a href="/tag/snap screenshot">snap screenshot</a></li>
                      
                    </ul>
                  </div>
                  <div class="post-content">
                    <div id="toc" class="toc"></div>
                    <p><img src="/assets/img/social-lg.jpg" alt="Snapchat" style="display: block; margin-left: auto; margin-right: auto;" /></p>

<p>While my friend was playing <strong><em>“That Level Again”</em></strong> game he mentioned there was a level in between when he had to take screenshot of Game Screen to pass that level (Weird right!). As I know a little bit about Mobile Development I thought they might be having some special permission to do so. To be sure I went ahead and asked to see all the permissions that game app was taking and it was just taking <strong><em>READ_STORAGE_SPACE</em></strong> permission. Then he mentioned that <strong>Snapchat</strong> also detects when you take screenshot of some other person’s story/chat, it notifies that person that you took a screenshot. That’s violating the rights of a stalker. And you could do that in your App too. Now lets see HOW!</p>

<p>In layman language, you observe screenshot folder for any file created during the time your app in on foreground. If any image is created in screenshot folder when your app is in foreground that means you app’s screenshot is taken. Below is implementation details of above method in Android.</p>

<p>So lets see how they might have done it in <strong>code</strong>. If we have <strong><em>READ_STORAGE_SPACE</em></strong> permission, we can actually attach a listener to any directory of file-system. And screen-shots in most phones are stored in particular directory (probably change from phone to phone, there is a way to detect that too. I would leave that for you to figure out). So when your App opens attach a listener (In this case <a href="https://developer.android.com/reference/android/os/FileObserver.html">FileObserver</a>) to screen-shot directory and implement its callback methods.</p>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">MyFileObserver</span> <span class="kd">extends</span> <span class="n">FileObserver</span> <span class="o">{</span>
    
    <span class="kd">public</span> <span class="n">String</span> <span class="n">absolutePath</span><span class="o">;</span>
    
    <span class="kd">public</span> <span class="nf">MyFileObserver</span><span class="o">(</span><span class="n">String</span> <span class="n">path</span><span class="o">)</span> <span class="o">{</span>
        <span class="kd">super</span><span class="o">(</span><span class="n">path</span><span class="o">,</span> <span class="n">FileObserver</span><span class="o">.</span><span class="na">CREATE</span><span class="o">);</span>
        <span class="n">absolutePath</span> <span class="o">=</span> <span class="n">path</span><span class="o">;</span>
    <span class="o">}</span>

<span class="err"> </span>   <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onEvent</span><span class="o">(</span><span class="kt">int</span> <span class="n">event</span><span class="o">,</span> <span class="n">String</span> <span class="n">path</span><span class="o">)</span> <span class="o">{</span>
        <span class="c1">// &lt;path&gt; where file or any directory is created</span>
        <span class="k">if</span><span class="o">(</span><span class="n">event</span> <span class="o">==</span> <span class="n">FileObserver</span><span class="o">.</span><span class="na">CREATE</span><span class="o">)</span>
            <span class="n">Log</span><span class="o">.</span><span class="na">v</span><span class="o">(</span><span class="n">TAG</span><span class="o">,</span><span class="s">"Screenshot Taken"</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre>
</div>
<p>Create an object of <strong>MyFileObserver</strong> class by passing path of directory you want to attach listener on and do your action in <strong><em>onEvent()</em></strong> method.</p>

<p>Below I am attaching a listener to <strong>Screenshots</strong> directory, during the time my Activity is on foreground, I am listening to the change in screenshot directory if any new file is created that means screenshot of my app s taken as its on foreground.</p>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="n">MyFileObserver</span> <span class="n">fileObserver</span> <span class="o">=</span> <span class="k">new</span> <span class="n">MyFileObserver</span><span class="o">(</span><span class="n">Environment</span><span class="o">.</span><span class="na">getExternalStorageDirectory</span><span class="o">().</span><span class="na">getAbsolutePath</span><span class="o">()</span> <span class="o">+</span> <span class="s">"/DCIM/Screenshots"</span><span class="o">);</span>
</code></pre>
</div>
<p>Call <strong><em>fileObserver.startWatching()</em></strong> in your Activity <strong><em>onResume()</em></strong> method and <strong><em>fileObserver.stopWatching()</em></strong> in Activity <strong><em>onPause()</em></strong>.</p>

<p>This simple code would detect if any screenshot is taken when your App is on foreground. If you find any discrepancy in this method, please let me know at <strong>viveksbhadauria007@gmail.com</strong></p>

<p>I made an Android App <a href="https://play.google.com/store/apps/details?id=com.viveksb007.snapnscreenshot">Snap Screenshot for Snapchat</a> which can take screenshot of Snapchat without detection and takes general screenshots too by simply clicking on a floating camera icon. Please try it and review.</p>

<p><a href="https://play.google.com/store/apps/details?id=com.viveksb007.snapnscreenshot" target="_blank">
<img src="/assets/img/gplay_badge.png" alt="Google Play Badge" style="display: block; margin-left: auto; margin-right: auto;" />
</a></p>

                    <div class="share-bar">
  <ul class="share-buttons">
    
    <li class="share-facebook">
      <a href="https://www.facebook.com/sharer/sharer.php?u=http://viveksb007.github.io/2017/11/how-snapchat-detects-screenshot" target="_blank" title="Share on Facebook">
        <span class="fa-stack fa-lg">
          <i class="fa fa-square-o fa-stack-2x"></i>
          <i class="fa fa-facebook fa-stack-1x"></i>
        </span>
      </a>
    </li>
    

    
    <li class="share-twitter">
      <a href="https://twitter.com/intent/tweet?url=http://viveksb007.github.io/2017/11/how-snapchat-detects-screenshot&text=How Snapchat detects when screenshot is taken (Hypothesis)" target="_blank" title="Tweet">
        <span class="fa-stack fa-lg">
          <i class="fa fa-square-o fa-stack-2x"></i>
          <i class="fa fa-twitter fa-stack-1x"></i>
        </span>
      </a>
    </li>
    

    
    <li class="share-google-plus">
      <a href="https://plus.google.com/share?url=http://viveksb007.github.io/2017/11/how-snapchat-detects-screenshot" target="_blank" title="Share on Google Plus">
        <span class="fa-stack fa-lg">
          <i class="fa fa-square-o fa-stack-2x"></i>
          <i class="fa fa-google-plus fa-stack-1x"></i>
        </span>
      </a>
    </li>
    

    
    <li class="share-linkedin">
      <a href="http://www.linkedin.com/shareArticle?mini=true&url=http://viveksb007.github.io/2017/11/how-snapchat-detects-screenshot&title=How Snapchat detects when screenshot is taken (Hypothesis)&summary=&source=" target="_blank" title="Share on LinkedIn">
        <span class="fa-stack fa-lg">
          <i class="fa fa-circle-thin fa-stack-2x"></i>
          <i class="fa fa-linkedin fa-stack-1x"></i>
        </span>
      </a>
    </li>
    

    
    <li class="share-pinterest">
      <a href="http://pinterest.com/pin/create/button/?urlhttp://viveksb007.github.io/2017/11/how-snapchat-detects-screenshot=&description=" target="_blank" title="Pin it">
        <span class="fa-stack fa-lg">
          <i class="fa fa-circle-thin fa-stack-2x"></i>
          <i class="fa fa-pinterest fa-stack-1x"></i>
        </span>
      </a>
    </li>
    

    
    <li class="share-envelope">
      <a href="mailto:?&subject=How Snapchat detects when screenshot is taken (Hypothesis)&body= http://viveksb007.github.io/2017/11/how-snapchat-detects-screenshot" target="_blank" title="Email">
        <span class="fa-stack fa-lg">
          <i class="fa fa-circle-thin fa-stack-2x"></i>
          <i class="fa fa-envelope-o fa-stack-1x"></i>
        </span>
      </a>
    </li>
    

  </ul>
</div>

                  </div>
                  
                  <div id="disqus_thread">
                    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
                    <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
                  </div>
                  
                </div>
              </div>
            </div>
            <div class="col-md-4 hidden-xs">
              <div class="sidebar ">
  <h2>Recent Posts</h2>
  <ul>
    
    <li><a href="/2018/04/uploading-processing-downloading-files-in-flask">Uploading, Processing and Downloading Files in Flask</a></li>
    
    <li><a href="/2017/12/ffmpeg-automate-filtering-and-editing-videos">FFmpeg : Automate Filtering and Editing Videos</a></li>
    
    <li><a href="/2017/11/how-snapchat-detects-screenshot">How Snapchat detects when screenshot is taken (Hypothesis)</a></li>
    
    <li><a href="/2017/10/gsoc-2017-pslab-fossasia">GSOC - 17 Pocket Science Lab : FOSSASIA</a></li>
    
    <li><a href="/2017/09/flash-fastboot-miui-rom-from-linux">Flash Fastboot MIUI ROM from Linux</a></li>
    
  </ul>
</div>

<div class="sidebar">
  <h2>Tags</h2>
  <ul class="sideBarTags">
    
    
    <li>
      <a href="/tag/MIUI ROM" data-toggle="tooltip" data-placement="right" title="1">
        <span>MIUI ROM</span></a></li>
    
    <li>
      <a href="/tag/android" data-toggle="tooltip" data-placement="right" title="1">
        <span>android</span></a></li>
    
    <li>
      <a href="/tag/automate-filtering" data-toggle="tooltip" data-placement="right" title="1">
        <span>automate-filtering</span></a></li>
    
    <li>
      <a href="/tag/bootloop" data-toggle="tooltip" data-placement="right" title="1">
        <span>bootloop</span></a></li>
    
    <li>
      <a href="/tag/downloading" data-toggle="tooltip" data-placement="right" title="1">
        <span>downloading</span></a></li>
    
    <li>
      <a href="/tag/ffmpeg-commands" data-toggle="tooltip" data-placement="right" title="1">
        <span>ffmpeg-commands</span></a></li>
    
    <li>
      <a href="/tag/flash-ROM" data-toggle="tooltip" data-placement="right" title="1">
        <span>flash-ROM</span></a></li>
    
    <li>
      <a href="/tag/flask" data-toggle="tooltip" data-placement="right" title="1">
        <span>flask</span></a></li>
    
    <li>
      <a href="/tag/fossasia" data-toggle="tooltip" data-placement="right" title="1">
        <span>fossasia</span></a></li>
    
    <li>
      <a href="/tag/gsoc" data-toggle="tooltip" data-placement="right" title="1">
        <span>gsoc</span></a></li>
    
    <li>
      <a href="/tag/processing" data-toggle="tooltip" data-placement="right" title="1">
        <span>processing</span></a></li>
    
    <li>
      <a href="/tag/project" data-toggle="tooltip" data-placement="right" title="1">
        <span>project</span></a></li>
    
    <li>
      <a href="/tag/pslab" data-toggle="tooltip" data-placement="right" title="1">
        <span>pslab</span></a></li>
    
    <li>
      <a href="/tag/qualcomm" data-toggle="tooltip" data-placement="right" title="1">
        <span>qualcomm</span></a></li>
    
    <li>
      <a href="/tag/self-driving" data-toggle="tooltip" data-placement="right" title="1">
        <span>self-driving</span></a></li>
    
    <li>
      <a href="/tag/snap screenshot" data-toggle="tooltip" data-placement="right" title="1">
        <span>snap screenshot</span></a></li>
    
    <li>
      <a href="/tag/snapchat" data-toggle="tooltip" data-placement="right" title="1">
        <span>snapchat</span></a></li>
    
    <li>
      <a href="/tag/uploading" data-toggle="tooltip" data-placement="right" title="1">
        <span>uploading</span></a></li>
    
    <li>
      <a href="/tag/video-editing" data-toggle="tooltip" data-placement="right" title="1">
        <span>video-editing</span></a></li>
    
  </ul>
</div>

            </div>
          </div>
        </div>
        
<!-- Add Disqus comments. -->
<div id="disqus_thread"></div>
<script type="text/javascript">
  /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
  var disqus_shortname = 'garageviveksb007'; // required: replace example with your forum shortname
  var disqus_identifier = "/2017/11/how-snapchat-detects-screenshot";

  /* * * DON'T EDIT BELOW THIS LINE * * */
  (function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>


      </div>
          <footer class="footer-distributed">
      <div class="container">
        <div class="footer">
          <p>Vivek Singh Bhadauria</p>
          <ul class="social-media">

  
    <li>
      <a title="viveksb007 on Github" href="https://github.com/viveksb007" target="_blank"><i class="fa fa-github fa-2x"></i></a>
    </li>
  

  

  
    <li>
      <a title="viveksb007 on LinkedIn" href="https://www.linkedin.com/in/viveksb007" target="_blank"><i class="fa fa-linkedin fa-2x"></i></a>
    </li>
  

  
        <li>
            <a href="mailto:">
                <i class="fa fa-envelope fa-2x"></i>
            </a>
        </li>
  

  
  <li>
    <a title="UCu14rW9exAAl-oaFDsDCKKg on YouTube" href="https://youtube.com/channel/UCu14rW9exAAl-oaFDsDCKKg" target="_blank"><i class="fa fa-youtube fa-2x"></i></a>
  </li>
  

  

  

  
    <li>
      <a title="feed.xml RSS" href="feed.xml" target="_blank"><i class="fa fa-rss fa-2x"></i></a>
    </li>
  

</ul>

        </div>
      </div>
    </footer>

    </div>
  </body>
</html>
